manifest {
    homePage    = 'https://github.com/TheJacksonLaboratory/splicing-pipelines-nf/'
    description = 'Nextflow Implementation of Anczukow-Lab workflow for alternative splicing processing'
    mainScript  = 'main.nf'
}

params {
    // Input files 
    reads          = false
    bams           = false
    rmats_pairs    = false
    run_name	     = false
    download_from  = false
    key_file       = false

    // Main arguments: 
    gtf            = false
    assembly_name  = false
    star_index     = false
    singleEnd      = false
    stranded       = 'first-strand'
    readlength     = false

    // Trimmomatic: 
    minlen         = 20
    slidingwindow  = false
    adapter        = false

    // Star
    overhang       = false
    mismatch       = 2
    filterScore    = 0.66
    sjdbOverhangMin = 3
    star_memory    = false

    // rMATS
    statoff        = false
    paired_stats   = false
    novelSS        = false
    mil            = 50
    mel            = 500

    // Other
    test           = false
    skiprMATS      = false
    skipMultiQC    = false
    outdir         = 'results'
    multiqc_config = "$baseDir/examples/assets/multiqc_config.yaml" 
    help           = false
    mega_time      = 20.h

    // Max resources
    max_memory     = 760.GB
    max_cpus       = 72
    max_time       = 72.h
}

process {
  container = 'gcr.io/nextflow-250616/splicing-pipelines-nf:gawk'
  withName: 'get_accession' {
    container = 'lifebitai/download_reads:latest'
  }
  withName: 'get_tcga_bams' {
    container = 'lifebitai/download_reads:latest'
  }
  withName: 'bamtofastq' {
    container = 'lifebitai/download_reads:latest'
  }
  withName: 'rmats' {
    container = 'gcr.io/nextflow-250616/rmats:4.1.0'
  }
  withName: 'paired_rmats' {
    container = 'gcr.io/nextflow-250616/rmats:4.1.0'
  }
}

profiles {
  standard {
    includeConfig 'conf/executors/google.config'
   }  
  docker { docker.enabled = true }
  base { includeConfig 'conf/executors/base.config' }
  sumner { 
    includeConfig 'conf/executors/base.config'
    includeConfig 'conf/executors/sumner.config' 
  }
  MYC_MCF10A_0h_vs_MYC_MCF10A_8h { includeConfig 'conf/examples/MYC_MCF10A_0h_vs_MYC_MCF10A_8h.config' }
  ultra_quick_test { includeConfig 'conf/examples/ultra_quick_test.config' }
}
